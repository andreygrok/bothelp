# Обработка очередей в несколько потоков
Тестировал на очереди из 10 аккаунтов и 100 тасков.\
Лог наполняется параллельными процессами 
100 тасков это 203 строки...\
При тестирвании получалось\
 скорость ~20-33 сек. на 100 тасков и 10 акков\
 скорость ~35-38 сек. на 1000 тасков и 100 акков 

## Установка

`$ docker-compose build`

`$ docker-compose up -d`


## Запуск

Для работы приложения из консоли, заходим в контейнер

`$ docker exec -ti bothelp_php bash`

Интсалл зависимостей

`$ cd app/` 

`$ composer install`

Генерация очереди

`$ php app/queue_gen.php`

Парсинг очереди

`$ php app/index.php`

Результаты лежат в `/app/logs/log.txt`

## Настройка
Параметры файла /app/.env\
ACCOUNT_COUNT -- кол-во аккаунтов для генератора очереди\
TASK_COUNT -- кол-во тасков после которого генератор остановитсья (значение 0 работать бесконечно)

## Структура 

 app/logs - логи
 
 app/Src/Queue - генератор фэйковых тасков\
 app/Worker --  выполняет таски конкретного аккаунта( метод executeTask задержка в 1 секунду)\
 app/QueueListener -- слушает очередь и создает подпроцессы для аккаунтов
 
 app/index.php -- запуск слушателя очереди\
 app/queue_gen.php -- запуск генератора очереди\
 app/account.php -- запуск воркера по акканутам(работает как саб.процесс)
 
  